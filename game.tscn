[gd_scene load_steps=18 format=3 uid="uid://ckg3nkg314bco"]

[ext_resource type="Script" path="res://game_manager.gd" id="1_joldl"]
[ext_resource type="Script" path="res://enemy.gd" id="2_ver8a"]
[ext_resource type="Script" path="res://player.gd" id="3_02vrg"]
[ext_resource type="Script" path="res://game mode state machine/game_mode_state_machine.gd" id="4_7q6ya"]
[ext_resource type="Script" path="res://game mode state machine/explore_state.gd" id="5_i40qu"]
[ext_resource type="Script" path="res://game mode state machine/combat_state.gd" id="6_ge1vo"]
[ext_resource type="Script" path="res://game mode state machine/uncover_state.gd" id="7_qy7uj"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_pbig4"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_iy12i"]
sky_material = SubResource("ProceduralSkyMaterial_pbig4")

[sub_resource type="Environment" id="Environment_1k5ql"]
background_mode = 2
sky = SubResource("Sky_iy12i")
tonemap_mode = 2

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_jj500"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4bc61"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_dve6v"]
material = SubResource("StandardMaterial3D_4bc61")

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ts4nl"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_oqc1q"]
albedo_color = Color(0.168627, 0.25098, 0.458824, 1)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_pbcnl"]
material = SubResource("StandardMaterial3D_oqc1q")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_eow3j"]
albedo_color = Color(1, 0, 0, 1)

[node name="game" type="Node3D"]
script = ExtResource("1_joldl")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1k5ql")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.497562, -0.0493126, 0, -0.0986251, 0.995125, -0.5, 0.861803, 0.0854118, -0.240571, 0.277787, 0.41668)
shadow_enabled = true

[node name="enemy" type="Node3D" parent="."]
process_mode = 3

[node name="hooligan" type="CharacterBody3D" parent="enemy"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.891, 0, -1.27712)
collision_mask = 5
script = ExtResource("2_ver8a")

[node name="CollisionShape3D" type="CollisionShape3D" parent="enemy/hooligan"]
shape = SubResource("CapsuleShape3D_jj500")

[node name="MeshInstance3D" type="MeshInstance3D" parent="enemy/hooligan"]
mesh = SubResource("CapsuleMesh_dve6v")

[node name="Label3D" type="Label3D" parent="enemy/hooligan"]
text = "hp: "

[node name="player" type="Node3D" parent="."]
process_mode = 3

[node name="controller" type="CharacterBody3D" parent="player"]
collision_layer = 5
script = ExtResource("3_02vrg")
is_controller = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="player/controller"]
shape = SubResource("CapsuleShape3D_ts4nl")

[node name="MeshInstance3D" type="MeshInstance3D" parent="player/controller"]
mesh = SubResource("CapsuleMesh_pbcnl")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.413071, 0.524279, -0.74465, 0, 0.817669, 0.575689, 0.910699, -0.2378, 0.337755, -8.38831, 9.17834, 5.00558)
projection = 1
size = 10.4312

[node name="GameModeStateMachine" type="Node" parent="."]
script = ExtResource("4_7q6ya")

[node name="Explore" type="Node3D" parent="GameModeStateMachine"]
script = ExtResource("5_i40qu")

[node name="Combat" type="Node3D" parent="GameModeStateMachine"]
script = ExtResource("6_ge1vo")

[node name="Uncover" type="Node3D" parent="GameModeStateMachine"]
script = ExtResource("7_qy7uj")

[node name="explore ui" type="Control" parent="."]
process_mode = 3
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="combat ui" type="Control" parent="."]
process_mode = 3
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Panel" type="Panel" parent="combat ui"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -118.0
offset_bottom = -118.0
grow_vertical = 0

[node name="VBoxContainer" type="VBoxContainer" parent="combat ui/Panel"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="attack" type="Button" parent="combat ui/Panel/VBoxContainer"]
layout_mode = 2
text = "attack"

[node name="item" type="Button" parent="combat ui/Panel/VBoxContainer"]
layout_mode = 2
text = "item"

[node name="leave" type="Button" parent="combat ui/Panel/VBoxContainer"]
layout_mode = 2
text = "leave
"

[node name="map" type="Node3D" parent="."]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, -1.18717, 0)

[node name="ground" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.418, 0, -0.0039444)
use_collision = true
size = Vector3(56.952, 1, 36.075)

[node name="building1pt1" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.5789, 6.92523, -13.0167)
use_collision = true
size = Vector3(13.0206, 14.8505, 10.0826)

[node name="building1pt2" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.6883, 6.92523, -13.1691)
use_collision = true
size = Vector3(6.56545, 14.8505, 10.275)

[node name="building1pt3" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.885872, 6.92523, -12.1598)
use_collision = true
size = Vector3(14.0345, 14.8505, 12.2935)

[node name="building2pt1" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.077, 6.92523, 13.0085)
use_collision = true
size = Vector3(11.9825, 14.8505, 9.99351)

[node name="building2pt2" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.0067, 6.92523, 12.9979)
use_collision = true
size = Vector3(11.869, 14.8505, 9.94999)

[node name="building2pt3" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.855225, 6.92523, 13.905)
use_collision = true
size = Vector3(14.1623, 14.8505, 7.70928)

[node name="CSGBox3D" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -34.4008, 4.81869, -0.203033)
use_collision = true
size = Vector3(9.60266, 9.94348, 36.4493)

[node name="CSGBox3D2" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -31.2494, 4.27976, 0.435945)
operation = 1
use_collision = true
size = Vector3(3.43383, 7.49524, 10.251)

[node name="CSGBox3D3" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -24.2832, -0.620912, 17.5018)
use_collision = true
size = Vector3(21.5396, 10.8223, 1)
material = SubResource("StandardMaterial3D_eow3j")

[node name="CSGBox3D4" type="CSGBox3D" parent="map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -21.6848, 2.38985, -18.4411)
use_collision = true
size = Vector3(26.7365, 10.8223, 1)
material = SubResource("StandardMaterial3D_eow3j")

[node name="CSGBox3D5" type="CSGBox3D" parent="map"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 18.7598, 2.62174, -0.312811)
use_collision = true
size = Vector3(26.7365, 10.8223, 1)
material = SubResource("StandardMaterial3D_eow3j")

[connection signal="player_touched" from="enemy/hooligan" to="." method="_on_enemy_touched"]
